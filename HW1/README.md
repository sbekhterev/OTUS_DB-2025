# Схема базы данных головного офиса сети магазинов

![Схема табиц и связей БД](store%20chain.png)

[SQL - скрипт для создания таблиц](store%20chain.sql)

## Описание таблиц


### *Region - Регионы*

Свойства: 

  - ID - Первичный ключ
  - RegionName - название региона
  - TimeZone varchar - временая зона региона


### *Store - Магазин*
  - ID - Первичный ключ
  - StoreName - Произвольное название магазина
  - Organization - Юр.лицо на которое отрыт магазин
  - INN - ИНН юр.лица или подразделения магаина
  - StoreAddress - адрес магазина
  - RegionId - ID региона в котором нах-ся магазин
  - StartTime - Время открытия магазина
  - EndTime - Время завершения работы магазина
  - AddressId - ID Адреса магазина


### *Address - Справочник адресов*
  - ID - Первичный ключ
  - postal_code - Почтовый индекс
  - federal_district - Федеральный округ
  - region_with_type - Регион с типом
  - city_with_type - Город с типом
  - settlement_with_type - Населенный пункт с типом
  - street_with_type - Улица с типом
  - house - Дом


### *Terminal - Номер кассы*
  - ID - Первичный ключ
  - TerminalName - Имя кассы (номер, произвольное имя)
  - StoreId - ID магазина в котром касса установленна
  - ZNKKT - Заводской номер Контрольно Кассовой Техники (ККТ)
  - FNKKT - Регистрационный номер ККТ (если требуется)


### *Cashier - Справочник кассиров*
  - ID - Первичный ключ
  - FirstName - Имя
  - LastName - Фамилия
  - PatronymicName - Отчество (не обязательное поле)
  - Hiring - Дата приёма на работу
  - Firing - Дата уволнения (не обязательное поле)
  - RoleId - ID Роли кассира


### *Role - Справочник ролей кассиров*
  - ID - Первичный ключ
  - RoleName - Имя роли кассира


### *Shift - Кассовые смены*
  - ID - Первичный ключ
  - TerminalId - ID кассы
  - ShiftDate - Дата смены
  - ShiftStart - Дата и время открытия смены
  - ShiftEnd - Дата и время закрытия смены
  - ZNKKT - Заводской номер ККТ на которой открыли смену
  - FNKKT - Регистрационный номер ККТ на которой открыли смену (если требуется)


### *Cheque - кассовые чеки*
  - ID - Первичный ключ
  - ShiftId - ID смены чека
  - CashierId - ID кассира
  - ChequeStart - Дата и время открытия чека
  - ChequeEnd - Дата и время закрытия чека (чек может быть не закрыт, например идёт продажа)
  - ChequeTypeId - ID типа чека (продажа, возврат, отменён и пр.)
  - Discount - Скидка чека, если применена
  - FDKKT -Номер фискального документа, если ККТ зарегистрирована


### *ChequeType - Справочник типов чека*
  - ID - Первичный ключ
  - ChequeType - Наименование типа чека


### *ChequePositions - Позиция в чеке*
  - ID - Первичный ключ
  - ChequeId - ID Чека
  - ProductId - ID товара
  - Amount real - Кол-во товара
  - PriceId - ID Цены товара
  - Price - Цена товара
  - Discount - Скидка на позицию товара


### *Products - Справочни товара*
  - ID - Первичный ключ
  - ProductName - Наименование
  - ProductUnitId - ID единицы измерения товара
  - ProductCategoryId - ID Категории товара


### *ProductUnit - Справочник единиц измерения товра*
  - ID - Первичный ключ
  - UnitName - Наименование еденицы
  - UnitType - Тип единцы


### *ProductCategory - Справочник категорий товаров*
  - ID - Первичный ключ
  - CategoryName - Наименование категории
  - ParentCategory - Родительская категория


### *ChequePayment - Оплата чека*
  - ID - Первичный ключ
  - ChequeId - ID чека
  - PaymentTypeId - ID типа оплаты
  - Discount - Скида на платёж
  - Amount - Сумма средств переданных для оплаты
  - Change - Сдача


### *PaymentType - Справочник типов оплаты*
  - ID - Первичный ключ
  - PaymentName - Наименование оплаты
  - Cashless - Признак безналичной оплаты


### *Price - Справочник цен*
  - ID - Первичный ключ
  - ProductId - ID товара
  - Price - цена за единицу товара
  - StartDate - Дата начала дейсвтия цены
  - EndDate - Дата окончания действия цены
